--- dwm-6.6/config.def.h	2025-08-09 16:00:55.740267680 +0300
+++ dwm-6.6-patched/config.def.h	2025-12-26 10:54:26.513301515 +0300
@@ -2,22 +2,72 @@
 
 /* appearance */
 static const unsigned int borderpx  = 1;        /* border pixel of windows */
+static const unsigned int gappx     = 6;        /* gaps between windows */
 static const unsigned int snap      = 32;       /* snap pixel */
 static const int showbar            = 1;        /* 0 means no bar */
 static const int topbar             = 1;        /* 0 means bottom bar */
 static const char *fonts[]          = { "monospace:size=10" };
 static const char dmenufont[]       = "monospace:size=10";
-static const char col_gray1[]       = "#222222";
-static const char col_gray2[]       = "#444444";
-static const char col_gray3[]       = "#bbbbbb";
-static const char col_gray4[]       = "#eeeeee";
-static const char col_cyan[]        = "#005577";
-static const char *colors[][3]      = {
-	/*               fg         bg         border   */
-	[SchemeNorm] = { col_gray3, col_gray1, col_gray2 },
-	[SchemeSel]  = { col_gray4, col_cyan,  col_cyan  },
+static unsigned int baralpha        = 0xd0;
+static unsigned int borderalpha     = OPAQUE;
+
+/* loaded on dwm launch, has to be present */
+static const char *flyscheme_default[][3] = {
+	[SchemeNorm] = { "#bbbbbb", "#222222", "#444444" },
+	[SchemeSel]  = { "#eeeeee", "#005577", "#005577" },
+};
+
+static const char *flyscheme_dracula[][3] = {
+	[SchemeNorm] = { "#f8f8f2", "#282a36", "#44475a" },
+	[SchemeSel]  = { "#282a36", "#bd93f9", "#bd93f9" },
+};
+
+static const char *flyscheme_solarized[][3] = {
+	[SchemeNorm] = { "#839496", "#002b36", "#073642" },
+	[SchemeSel]  = { "#002b36", "#2aa198", "#2aa198" },
+};
+
+static const char *flyscheme_nord[][3] = {
+	[SchemeNorm] = { "#d8dee9", "#2e3440", "#4c566a" },
+	[SchemeSel]  = { "#2e3440", "#88c0d0", "#88c0d0" },
+};
+
+static const char *flyscheme_gruvbox[][3] = {
+	[SchemeNorm] = { "#ebdbb2", "#282828", "#3c3836" },
+	[SchemeSel]  = { "#282828", "#fabd2f", "#fabd2f" },
 };
 
+static const char *flyscheme_light[][3] = {
+	[SchemeNorm] = { "#222222", "#eeeeee", "#cccccc" },
+	[SchemeSel]  = { "#ffffff", "#4a90e2", "#4a90e2" },
+};
+
+static const char *flyscheme_plan9[][3] = {
+	[SchemeNorm] = { "#000000", "#ffffea", "#999999" },
+	[SchemeSel]  = { "#000000", "#9ecfff", "#9ecfff" },
+};
+
+static const char *flyscheme_cyberpunk[][3] = {
+	[SchemeNorm] = { "#00ffcc", "#0d0221", "#1d1231" },
+	[SchemeSel]  = { "#0d0221", "#ff00aa", "#ff00aa" },
+};
+
+/* you can move the schemes to a different header and do #include "flyschemes.h"
+ * or you can move each scheme to its own file
+ * and do #include flyscheme_light.h, #include flyscheme_plan9.h, ... */
+
+static const char *(*flyschemes[])[3] = {
+	flyscheme_default,
+	flyscheme_light,
+	flyscheme_plan9,
+	flyscheme_dracula,
+	flyscheme_solarized,
+	flyscheme_nord,
+	flyscheme_gruvbox,
+	flyscheme_cyberpunk,
+	NULL // used to count the number of flyschemes
+ };
+
 /* tagging */
 static const char *tags[] = { "1", "2", "3", "4", "5", "6", "7", "8", "9" };
 
@@ -34,7 +84,7 @@ static const Rule rules[] = {
 /* layout(s) */
 static const float mfact     = 0.55; /* factor of master area size [0.05..0.95] */
 static const int nmaster     = 1;    /* number of clients in master area */
-static const int resizehints = 1;    /* 1 means respect size hints in tiled resizals */
+static const int resizehints = 0;    /* 1 means respect size hints in tiled resizals */
 static const int lockfullscreen = 1; /* 1 will force focus on the fullscreen window */
 
 static const Layout layouts[] = {
@@ -57,8 +107,38 @@ static const Layout layouts[] = {
 
 /* commands */
 static char dmenumon[2] = "0"; /* component of dmenucmd, manipulated in spawn() */
-static const char *dmenucmd[] = { "dmenu_run", "-m", dmenumon, "-fn", dmenufont, "-nb", col_gray1, "-nf", col_gray3, "-sb", col_cyan, "-sf", col_gray4, NULL };
-static const char *termcmd[]  = { "st", NULL };
+static const char *dmenucmd[] = {
+	"dmenu_run",
+	"-m", dmenumon,
+	"-fn", dmenufont,
+	"-nb", "#222222", /* changed as dmenucmd[6] in cycle_flyschemes */
+	"-nf", "#bbbbbb", /* changed as dmenucmd[8] in cycle_flyschemes */
+	"-sb", "#005577", /* changed as dmenucmd[10] in cycle_flyschemes */
+	"-sf", "#eeeeee", /* changed as dmenucmd[12] in cycle_flyschemes */
+	NULL
+};
+
+static const char *st_optionschemes[] = {
+	"default",
+	"light",
+	"plan9",
+	"dracula",
+	"solarized",
+	"nord",
+	"gruvbox",
+	"cyberpunk"
+};
+
+static const char *st_alphas[] = {
+	"0.8", "0.7", "0.9", "0.8", "0.9", "0.6", "0.7", "0.8"
+};
+
+static const char *termcmd[]  = {
+	"st",
+	"-S", "default", /* changed as termcmd[2] in cycle_flyschemes */
+	"-A", "0.8", /* changed as termcmd[4] in cycle_flyschemes */
+	NULL
+};
 
 static const Key keys[] = {
 	/* modifier                     key        function        argument */
@@ -73,7 +153,9 @@ static const Key keys[] = {
 	{ MODKEY,                       XK_l,      setmfact,       {.f = +0.05} },
 	{ MODKEY,                       XK_Return, zoom,           {0} },
 	{ MODKEY,                       XK_Tab,    view,           {0} },
-	{ MODKEY|ShiftMask,             XK_c,      killclient,     {0} },
+	{ MODKEY|ShiftMask,             XK_x,      killclient,     {0} },
+	{ MODKEY,                       XK_c,      cycle_flyschemes, { .i = +1 } },
+	{ MODKEY|ShiftMask,             XK_c,      cycle_flyschemes, { .i = -1 } },
 	{ MODKEY,                       XK_t,      setlayout,      {.v = &layouts[0]} },
 	{ MODKEY,                       XK_f,      setlayout,      {.v = &layouts[1]} },
 	{ MODKEY,                       XK_m,      setlayout,      {.v = &layouts[2]} },
diff -upN dwm-6.6/config.h dwm-6.6-patched/config.h
--- dwm-6.6/config.h	1970-01-01 03:00:00.000000000 +0300
+++ dwm-6.6-patched/config.h	2025-12-26 10:56:04.326629566 +0300
@@ -0,0 +1,162 @@
+/* See LICENSE file for copyright and license details. */
+
+/* appearance */
+static const unsigned int borderpx  = 2;        /* border pixel of windows */
+static const unsigned int gappx     = 8;        /* gaps between windows */
+static const unsigned int snap      = 8;       /* snap pixel */
+static const int showbar            = 1;        /* 0 means no bar */
+static const int topbar             = 1;        /* 0 means bottom bar */
+static const char *fonts[]          = { "Hack-Regular:size=9" };
+static const char dmenufont[]       = "Hack-Regular:size=9";
+static unsigned int baralpha        = 0xd0;
+static unsigned int borderalpha     = OPAQUE;
+
+/* loaded on dwm launch, has to be present */
+static const char *flyscheme_default[][3] = {
+	[SchemeNorm] = { "#bbbbbb", "#222222", "#444444" },
+	[SchemeSel]  = { "#eeeeee", "#005577", "#005577" },
+};
+
+/* tagging */
+static const char *tags[] = { "1", "2", "3", "4", "5", "6", "7", "8", "9" };
+
+static const Rule rules[] = {
+	/* xprop(1):
+	 *	WM_CLASS(STRING) = instance, class
+	 *	WM_NAME(STRING) = title
+	 */
+	/* class      instance    title       tags mask     isfloating   monitor */
+	{ "Gimp",     NULL,       NULL,       0,            1,           -1 },
+	{ "Firefox",  NULL,       NULL,       1 << 8,       0,           -1 },
+};
+
+/* layout(s) */
+static const float mfact     = 0.55; /* factor of master area size [0.05..0.95] */
+static const int nmaster     = 1;    /* number of clients in master area */
+static const int resizehints = 0;    /* 1 means respect size hints in tiled resizals */
+static const int lockfullscreen = 1; /* 1 will force focus on the fullscreen window */
+
+static const Layout layouts[] = {
+	/* symbol     arrange function */
+	{ "[]=",      tile },    /* first entry is default */
+	{ "><>",      NULL },    /* no layout function means floating behavior */
+	{ "[M]",      monocle },
+};
+
+/* key definitions */
+#define MODKEY Mod4Mask
+#define TAGKEYS(KEY,TAG) \
+	{ MODKEY,                       KEY,      view,           {.ui = 1 << TAG} }, \
+	{ MODKEY|ControlMask,           KEY,      toggleview,     {.ui = 1 << TAG} }, \
+	{ MODKEY|ShiftMask,             KEY,      tag,            {.ui = 1 << TAG} }, \
+	{ MODKEY|ControlMask|ShiftMask, KEY,      toggletag,      {.ui = 1 << TAG} },
+
+/* helper for spawning shell commands in the pre dwm-5.0 fashion */
+#define SHCMD(cmd) { .v = (const char*[]){ "/bin/sh", "-c", cmd, NULL } }
+
+/* commands */
+static char dmenumon[2] = "0"; /* component of dmenucmd, manipulated in spawn() */
+static const char *dmenucmd[] = {
+	"dmenu_run",
+	"-m", dmenumon,
+	"-fn", dmenufont,
+	"-nb", "#222222", /* changed as dmenucmd[6] in cycle_flyschemes */
+	"-nf", "#bbbbbb", /* changed as dmenucmd[8] in cycle_flyschemes */
+	"-sb", "#005577", /* changed as dmenucmd[10] in cycle_flyschemes */
+	"-sf", "#eeeeee", /* changed as dmenucmd[12] in cycle_flyschemes */
+	NULL
+};
+
+#include "flyschemes.h"
+
+static const char *(*flyschemes[])[3] = {
+
+	flyscheme_default,
+	flyscheme_default_green,
+	flyscheme_default_yellow,
+	flyscheme_default_red,
+	flyscheme_default_magenta,
+	flyscheme_default_pink,
+
+	flyscheme_dracula,
+	flyscheme_gruvbox,
+	flyscheme_cyberpunk,
+
+	flyscheme_light,
+
+	NULL // used to count the number of flyschemes
+ };
+
+static const char *st_optionschemes[] = {
+	"default", "default", "default", "default", "default", "default",
+	"dracula", "gruvbox", "cyberpunk",
+	"default",
+};
+
+static const char *st_alphas[] = {
+	"0.8", "0.8", "0.8", "0.8", "0.8", "0.8",
+	"0.9", "0.9", "0.9",
+	"0.7",
+};
+
+static const char *termcmd[]  = {
+	"st",
+	"-S", "default", /* changed as termcmd[2] in cycle_flyschemes */
+	"-A", "0.8", /* changed as termcmd[4] in cycle_flyschemes */
+	NULL
+};
+
+static const Key keys[] = {
+	/* modifier                     key        function        argument */
+	{ MODKEY,                       XK_p,      spawn,          {.v = dmenucmd } },
+	{ MODKEY|ShiftMask,             XK_Return, spawn,          {.v = termcmd } },
+	{ MODKEY,                       XK_b,      togglebar,      {0} },
+	{ MODKEY,                       XK_j,      focusstack,     {.i = +1 } },
+	{ MODKEY,                       XK_k,      focusstack,     {.i = -1 } },
+	{ MODKEY,                       XK_i,      incnmaster,     {.i = +1 } },
+	{ MODKEY,                       XK_d,      incnmaster,     {.i = -1 } },
+	{ MODKEY,                       XK_h,      setmfact,       {.f = -0.05} },
+	{ MODKEY,                       XK_l,      setmfact,       {.f = +0.05} },
+	{ MODKEY,                       XK_Return, zoom,           {0} },
+	{ MODKEY|ShiftMask,             XK_x,      killclient,     {0} },
+	{ MODKEY,                       XK_c,      cycle_flyschemes, { .i = +1 } },
+	{ MODKEY|ShiftMask,             XK_c,      cycle_flyschemes, { .i = -1 } },
+	{ MODKEY,                       XK_t,      setlayout,      {.v = &layouts[0]} },
+	{ MODKEY,                       XK_f,      setlayout,      {.v = &layouts[1]} },
+	{ MODKEY,                       XK_m,      setlayout,      {.v = &layouts[2]} },
+	{ MODKEY|ShiftMask,             XK_f,      togglefloating, {0} },
+	{ MODKEY,                       XK_0,      view,           {.ui = ~0 } },
+	{ MODKEY|ShiftMask,             XK_0,      tag,            {.ui = ~0 } },
+	{ MODKEY,                       XK_comma,  focusmon,       {.i = -1 } },
+	{ MODKEY,                       XK_period, focusmon,       {.i = +1 } },
+	{ MODKEY|ShiftMask,             XK_comma,  tagmon,         {.i = -1 } },
+	{ MODKEY|ShiftMask,             XK_period, tagmon,         {.i = +1 } },
+	TAGKEYS(                        XK_1,                      0)
+	TAGKEYS(                        XK_2,                      1)
+	TAGKEYS(                        XK_3,                      2)
+	TAGKEYS(                        XK_4,                      3)
+	TAGKEYS(                        XK_5,                      4)
+	TAGKEYS(                        XK_6,                      5)
+	TAGKEYS(                        XK_7,                      6)
+	TAGKEYS(                        XK_8,                      7)
+	TAGKEYS(                        XK_9,                      8)
+	{ MODKEY|ShiftMask,             XK_q,      quit,           {0} },
+};
+
+/* button definitions */
+/* click can be ClkTagBar, ClkLtSymbol, ClkStatusText, ClkWinTitle, ClkClientWin, or ClkRootWin */
+static const Button buttons[] = {
+	/* click                event mask      button          function        argument */
+	{ ClkLtSymbol,          0,              Button1,        setlayout,      {0} },
+	{ ClkLtSymbol,          0,              Button3,        setlayout,      {.v = &layouts[2]} },
+	{ ClkWinTitle,          0,              Button2,        zoom,           {0} },
+	{ ClkStatusText,        0,              Button2,        spawn,          {.v = termcmd } },
+	{ ClkClientWin,         MODKEY,         Button1,        movemouse,      {0} },
+	{ ClkClientWin,         MODKEY,         Button2,        togglefloating, {0} },
+	{ ClkClientWin,         MODKEY,         Button3,        resizemouse,    {0} },
+	{ ClkTagBar,            0,              Button1,        view,           {0} },
+	{ ClkTagBar,            0,              Button3,        toggleview,     {0} },
+	{ ClkTagBar,            MODKEY,         Button1,        tag,            {0} },
+	{ ClkTagBar,            MODKEY,         Button3,        toggletag,      {0} },
+};
+
diff -upN dwm-6.6/config.mk dwm-6.6-patched/config.mk
--- dwm-6.6/config.mk	2025-08-09 16:00:55.740267680 +0300
+++ dwm-6.6-patched/config.mk	2025-12-26 10:54:26.513301515 +0300
@@ -4,7 +4,7 @@ VERSION = 6.6
 # Customize below to fit your system
 
 # paths
-PREFIX = /usr/local
+PREFIX = ~/.local
 MANPREFIX = ${PREFIX}/share/man
 
 X11INC = /usr/X11R6/include
@@ -23,7 +23,7 @@ FREETYPEINC = /usr/include/freetype2
 
 # includes and libs
 INCS = -I${X11INC} -I${FREETYPEINC}
-LIBS = -L${X11LIB} -lX11 ${XINERAMALIBS} ${FREETYPELIBS}
+LIBS = -L${X11LIB} -lX11 ${XINERAMALIBS} ${FREETYPELIBS} -lXrender
 
 # flags
 CPPFLAGS = -D_DEFAULT_SOURCE -D_BSD_SOURCE -D_XOPEN_SOURCE=700L -DVERSION=\"${VERSION}\" ${XINERAMAFLAGS}
diff -upN dwm-6.6/drw.c dwm-6.6-patched/drw.c
--- dwm-6.6/drw.c	2025-08-09 16:00:55.740267680 +0300
+++ dwm-6.6-patched/drw.c	2025-12-26 10:54:26.513301515 +0300
@@ -47,7 +47,7 @@ utf8decode(const char *s_in, long *u, in
 }
 
 Drw *
-drw_create(Display *dpy, int screen, Window root, unsigned int w, unsigned int h)
+drw_create(Display *dpy, int screen, Window root, unsigned int w, unsigned int h, Visual *visual, unsigned int depth, Colormap cmap)
 {
 	Drw *drw = ecalloc(1, sizeof(Drw));
 
@@ -56,8 +56,11 @@ drw_create(Display *dpy, int screen, Win
 	drw->root = root;
 	drw->w = w;
 	drw->h = h;
-	drw->drawable = XCreatePixmap(dpy, root, w, h, DefaultDepth(dpy, screen));
-	drw->gc = XCreateGC(dpy, root, 0, NULL);
+	drw->visual = visual;
+	drw->depth = depth;
+	drw->cmap = cmap;
+	drw->drawable = XCreatePixmap(dpy, root, w, h, depth);
+	drw->gc = XCreateGC(dpy, drw->drawable, 0, NULL);
 	XSetLineAttributes(dpy, drw->gc, 1, LineSolid, CapButt, JoinMiter);
 
 	return drw;
@@ -73,7 +76,7 @@ drw_resize(Drw *drw, unsigned int w, uns
 	drw->h = h;
 	if (drw->drawable)
 		XFreePixmap(drw->dpy, drw->drawable);
-	drw->drawable = XCreatePixmap(drw->dpy, drw->root, w, h, DefaultDepth(drw->dpy, drw->screen));
+	drw->drawable = XCreatePixmap(drw->dpy, drw->root, w, h, drw->depth);
 }
 
 void
@@ -167,21 +170,21 @@ drw_fontset_free(Fnt *font)
 }
 
 void
-drw_clr_create(Drw *drw, Clr *dest, const char *clrname)
+drw_clr_create(Drw *drw, Clr *dest, const char *clrname, unsigned int alpha)
 {
 	if (!drw || !dest || !clrname)
 		return;
 
-	if (!XftColorAllocName(drw->dpy, DefaultVisual(drw->dpy, drw->screen),
-	                       DefaultColormap(drw->dpy, drw->screen),
+	if (!XftColorAllocName(drw->dpy, drw->visual, drw->cmap,
 	                       clrname, dest))
 		die("error, cannot allocate color '%s'", clrname);
+	dest->pixel = (dest->pixel & 0x00ffffffU) | (alpha << 24);
 }
 
 /* Wrapper to create color schemes. The caller has to call free(3) on the
  * returned color scheme when done using it. */
 Clr *
-drw_scm_create(Drw *drw, const char *clrnames[], size_t clrcount)
+drw_scm_create(Drw *drw, const char *clrnames[], const unsigned int clralphas[], size_t clrcount)
 {
 	size_t i;
 	Clr *ret;
@@ -191,7 +194,7 @@ drw_scm_create(Drw *drw, const char *clr
 		return NULL;
 
 	for (i = 0; i < clrcount; i++)
-		drw_clr_create(drw, &ret[i], clrnames[i]);
+		drw_clr_create(drw, &ret[i], clrnames[i], clralphas[i]);
 	return ret;
 }
 
@@ -250,9 +253,7 @@ drw_text(Drw *drw, int x, int y, unsigne
 		XFillRectangle(drw->dpy, drw->drawable, drw->gc, x, y, w, h);
 		if (w < lpad)
 			return x + w;
-		d = XftDrawCreate(drw->dpy, drw->drawable,
-		                  DefaultVisual(drw->dpy, drw->screen),
-		                  DefaultColormap(drw->dpy, drw->screen));
+		d = XftDrawCreate(drw->dpy, drw->drawable, drw->visual, drw->cmap);
 		x += lpad;
 		w -= lpad;
 	}
diff -upN dwm-6.6/drw.h dwm-6.6-patched/drw.h
--- dwm-6.6/drw.h	2025-08-09 16:00:55.740267680 +0300
+++ dwm-6.6-patched/drw.h	2025-12-26 10:54:26.516634848 +0300
@@ -20,6 +20,9 @@ typedef struct {
 	Display *dpy;
 	int screen;
 	Window root;
+	Visual *visual;
+	unsigned int depth;
+	Colormap cmap;
 	Drawable drawable;
 	GC gc;
 	Clr *scheme;
@@ -27,7 +30,7 @@ typedef struct {
 } Drw;
 
 /* Drawable abstraction */
-Drw *drw_create(Display *dpy, int screen, Window win, unsigned int w, unsigned int h);
+Drw *drw_create(Display *dpy, int screen, Window win, unsigned int w, unsigned int h, Visual *visual, unsigned int depth, Colormap cmap);
 void drw_resize(Drw *drw, unsigned int w, unsigned int h);
 void drw_free(Drw *drw);
 
@@ -39,8 +42,8 @@ unsigned int drw_fontset_getwidth_clamp(
 void drw_font_getexts(Fnt *font, const char *text, unsigned int len, unsigned int *w, unsigned int *h);
 
 /* Colorscheme abstraction */
-void drw_clr_create(Drw *drw, Clr *dest, const char *clrname);
-Clr *drw_scm_create(Drw *drw, const char *clrnames[], size_t clrcount);
+void drw_clr_create(Drw *drw, Clr *dest, const char *clrname, unsigned int alpha);
+Clr *drw_scm_create(Drw *drw, const char *clrnames[], const unsigned int clralphas[], size_t clrcount);
 
 /* Cursor abstraction */
 Cur *drw_cur_create(Drw *drw, int shape);
diff -upN dwm-6.6/dwm.1 dwm-6.6-patched/dwm.1
--- dwm-6.6/dwm.1	2025-08-09 16:00:55.740267680 +0300
+++ dwm-6.6-patched/dwm.1	2025-12-26 10:54:26.516634848 +0300
@@ -113,9 +113,15 @@ Decrease master area size.
 .B Mod1\-Return
 Zooms/cycles focused window to/from master area (tiled layouts only).
 .TP
-.B Mod1\-Shift\-c
+.B Mod1\-Shift\-x
 Close focused window.
 .TP
+.B Mod1\-c
+Cycle flyscheme.
+.TP
+.B Mod1\-Shift\-c
+Cycle flyscheme back.
+.TP
 .B Mod1\-Shift\-space
 Toggle focused window between tiled and floating state.
 .TP
diff -upN dwm-6.6/dwm.c dwm-6.6-patched/dwm.c
--- dwm-6.6/dwm.c	2025-08-09 16:00:55.740267680 +0300
+++ dwm-6.6-patched/dwm.c	2025-12-26 10:54:26.516634848 +0300
@@ -51,11 +51,13 @@
                                * MAX(0, MIN((y)+(h),(m)->wy+(m)->wh) - MAX((y),(m)->wy)))
 #define ISVISIBLE(C)            ((C->tags & C->mon->tagset[C->mon->seltags]))
 #define MOUSEMASK               (BUTTONMASK|PointerMotionMask)
-#define WIDTH(X)                ((X)->w + 2 * (X)->bw)
-#define HEIGHT(X)               ((X)->h + 2 * (X)->bw)
+#define WIDTH(X)                ((X)->w + 2 * (X)->bw + gappx)
+#define HEIGHT(X)               ((X)->h + 2 * (X)->bw + gappx)
 #define TAGMASK                 ((1 << LENGTH(tags)) - 1)
 #define TEXTW(X)                (drw_fontset_getwidth(drw, (X)) + lrpad)
 
+#define OPAQUE                  0xffU
+
 /* enums */
 enum { CurNormal, CurResize, CurMove, CurLast }; /* cursor */
 enum { SchemeNorm, SchemeSel }; /* color schemes */
@@ -141,6 +143,8 @@ typedef struct {
 } Rule;
 
 /* function declarations */
+static void cycle_flyschemes(const Arg *arg);
+static void update_scheme();
 static void applyrules(Client *c);
 static int applysizehints(Client *c, int *x, int *y, int *w, int *h, int interact);
 static void arrange(Monitor *m);
@@ -231,9 +235,11 @@ static Monitor *wintomon(Window w);
 static int xerror(Display *dpy, XErrorEvent *ee);
 static int xerrordummy(Display *dpy, XErrorEvent *ee);
 static int xerrorstart(Display *dpy, XErrorEvent *ee);
+static void xinitvisual(void);
 static void zoom(const Arg *arg);
 
 /* variables */
+static unsigned int iflysch = 0;
 static const char broken[] = "broken";
 static char stext[256];
 static int screen;
@@ -266,6 +272,10 @@ static Display *dpy;
 static Drw *drw;
 static Monitor *mons, *selmon;
 static Window root, wmcheckwin;
+static int useargb = 0;
+static Visual *visual;
+static int depth;
+static Colormap cmap;
 
 /* configuration, allows nested code to access above variables */
 #include "config.h"
@@ -485,7 +495,7 @@ cleanup(void)
 		cleanupmon(mons);
 	for (i = 0; i < CurLast; i++)
 		drw_cur_free(drw, cursor[i]);
-	for (i = 0; i < LENGTH(colors); i++)
+	for (i = 0; i < LENGTH(flyscheme_default); i++)
 		free(scheme[i]);
 	free(scheme);
 	XDestroyWindow(dpy, wmcheckwin);
@@ -1285,12 +1295,36 @@ void
 resizeclient(Client *c, int x, int y, int w, int h)
 {
 	XWindowChanges wc;
+	unsigned int n;
+	unsigned int gapoffset;
+	unsigned int gapincr;
+	Client *nbc;
 
-	c->oldx = c->x; c->x = wc.x = x;
-	c->oldy = c->y; c->y = wc.y = y;
-	c->oldw = c->w; c->w = wc.width = w;
-	c->oldh = c->h; c->h = wc.height = h;
 	wc.border_width = c->bw;
+
+	/* Get number of clients for the client's monitor */
+	for (n = 0, nbc = nexttiled(c->mon->clients); nbc; nbc = nexttiled(nbc->next), n++);
+
+	/* Do nothing if layout is floating */
+	if (c->isfloating || c->mon->lt[c->mon->sellt]->arrange == NULL) {
+		gapincr = gapoffset = 0;
+	} else {
+		/* Remove border and gap if layout is monocle */
+		if (c->mon->lt[c->mon->sellt]->arrange == monocle) {
+			gapoffset = 0;
+			gapincr = -2 * borderpx;
+			wc.border_width = 0;
+		} else {
+			gapoffset = gappx;
+			gapincr = 2 * gappx;
+		}
+	}
+
+	c->oldx = c->x; c->x = wc.x = x + gapoffset;
+	c->oldy = c->y; c->y = wc.y = y + gapoffset;
+	c->oldw = c->w; c->w = wc.width = w - gapincr;
+	c->oldh = c->h; c->h = wc.height = h - gapincr;
+
 	XConfigureWindow(dpy, c->win, CWX|CWY|CWWidth|CWHeight|CWBorderWidth, &wc);
 	configure(c);
 	XSync(dpy, False);
@@ -1557,7 +1591,8 @@ setup(void)
 	sw = DisplayWidth(dpy, screen);
 	sh = DisplayHeight(dpy, screen);
 	root = RootWindow(dpy, screen);
-	drw = drw_create(dpy, screen, root, sw, sh);
+	xinitvisual();
+	drw = drw_create(dpy, screen, root, sw, sh, visual, depth, cmap);
 	if (!drw_fontset_create(drw, fonts, LENGTH(fonts)))
 		die("no fonts could be loaded.");
 	lrpad = drw->fonts->h;
@@ -1583,9 +1618,10 @@ setup(void)
 	cursor[CurResize] = drw_cur_create(drw, XC_sizing);
 	cursor[CurMove] = drw_cur_create(drw, XC_fleur);
 	/* init appearance */
-	scheme = ecalloc(LENGTH(colors), sizeof(Clr *));
-	for (i = 0; i < LENGTH(colors); i++)
-		scheme[i] = drw_scm_create(drw, colors[i], 3);
+	unsigned int alphas[] = {borderalpha, baralpha, OPAQUE};
+	scheme = ecalloc(LENGTH(flyscheme_default), sizeof(Clr *));
+	for (i = 0; i < LENGTH(flyscheme_default); i++)
+		scheme[i] = drw_scm_create(drw, flyscheme_default[i], alphas, 3);
 	/* init bars */
 	updatebars();
 	updatestatus();
@@ -1700,7 +1736,7 @@ tile(Monitor *m)
 	for (i = my = ty = 0, c = nexttiled(m->clients); c; c = nexttiled(c->next), i++)
 		if (i < m->nmaster) {
 			h = (m->wh - my) / (MIN(n, m->nmaster) - i);
-			resize(c, m->wx, m->wy + my, mw - (2*c->bw), h - (2*c->bw), 0);
+			resize(c, m->wx, m->wy + my, mw - (2*c->bw) + (n > 1 ? gappx : 0), h - (2*c->bw), 0);
 			if (my + HEIGHT(c) < m->wh)
 				my += HEIGHT(c);
 		} else {
@@ -1820,16 +1856,18 @@ updatebars(void)
 	Monitor *m;
 	XSetWindowAttributes wa = {
 		.override_redirect = True,
-		.background_pixmap = ParentRelative,
+		.background_pixel = 0,
+		.border_pixel = 0,
+		.colormap = cmap,
 		.event_mask = ButtonPressMask|ExposureMask
 	};
 	XClassHint ch = {"dwm", "dwm"};
 	for (m = mons; m; m = m->next) {
 		if (m->barwin)
 			continue;
-		m->barwin = XCreateWindow(dpy, root, m->wx, m->by, m->ww, bh, 0, DefaultDepth(dpy, screen),
-				CopyFromParent, DefaultVisual(dpy, screen),
-				CWOverrideRedirect|CWBackPixmap|CWEventMask, &wa);
+		m->barwin = XCreateWindow(dpy, root, m->wx, m->by, m->ww, bh, 0, depth,
+				InputOutput, visual,
+				CWOverrideRedirect|CWBackPixel|CWBorderPixel|CWColormap|CWEventMask, &wa);
 		XDefineCursor(dpy, m->barwin, cursor[CurNormal]->cursor);
 		XMapRaised(dpy, m->barwin);
 		XSetClassHint(dpy, m->barwin, &ch);
@@ -2128,6 +2166,43 @@ xerrorstart(Display *dpy, XErrorEvent *e
 }
 
 void
+xinitvisual(void)
+{
+	XVisualInfo *infos;
+	XRenderPictFormat *fmt;
+	int nitems;
+	int i;
+
+	XVisualInfo tpl = {
+		.screen = screen,
+		.depth = 32,
+		.class = TrueColor
+	};
+	long masks = VisualScreenMask | VisualDepthMask | VisualClassMask;
+
+	infos = XGetVisualInfo(dpy, masks, &tpl, &nitems);
+	visual = NULL;
+	for(i = 0; i < nitems; i++) {
+		fmt = XRenderFindVisualFormat(dpy, infos[i].visual);
+		if (fmt->type == PictTypeDirect && fmt->direct.alphaMask) {
+			visual = infos[i].visual;
+			depth = infos[i].depth;
+			cmap = XCreateColormap(dpy, root, visual, AllocNone);
+			useargb = 1;
+			break;
+		}
+	}
+
+	XFree(infos);
+
+	if (!visual) {
+		visual = DefaultVisual(dpy, screen);
+		depth = DefaultDepth(dpy, screen);
+		cmap = DefaultColormap(dpy, screen);
+	}
+}
+
+void
 zoom(const Arg *arg)
 {
 	Client *c = selmon->sel;
@@ -2139,6 +2214,41 @@ zoom(const Arg *arg)
 	pop(c);
 }
 
+void
+update_scheme()
+{
+	unsigned int alphas[] = {borderalpha, baralpha, OPAQUE};
+	scheme[SchemeNorm] = drw_scm_create(drw, flyschemes[iflysch][SchemeNorm], alphas, 3);
+	scheme[SchemeSel] = drw_scm_create(drw, flyschemes[iflysch][SchemeSel], alphas, 3);
+	dmenucmd[6] = flyschemes[iflysch][SchemeNorm][1];
+	dmenucmd[8] = flyschemes[iflysch][SchemeNorm][0];
+	dmenucmd[10] = flyschemes[iflysch][SchemeSel][1];
+	dmenucmd[12] = flyschemes[iflysch][SchemeSel][0];
+	int optschlen = LENGTH(st_optionschemes);
+	int alphaslen = LENGTH(st_alphas);
+	termcmd[2] = st_optionschemes[iflysch % optschlen];
+	termcmd[4] = st_alphas[iflysch % alphaslen];
+	Client *cl = selmon->sel;
+	Client *c;
+	Monitor *m;
+	for (m = mons; m; m = m->next)
+		for (c = m->clients; c; c = c->next)
+			focus(c);
+	focus(cl);
+}
+
+void
+cycle_flyschemes(const Arg *arg)
+{
+	int flyschemes_limit = 256;
+	int i;
+	for(i = 0; flyschemes[i] != NULL && i < flyschemes_limit; i++)
+		;
+	iflysch += i + arg->i;
+	iflysch %= i;
+	update_scheme();
+}
+
 int
 main(int argc, char *argv[])
 {
diff -upN dwm-6.6/flyschemes.h dwm-6.6-patched/flyschemes.h
--- dwm-6.6/flyschemes.h	1970-01-01 03:00:00.000000000 +0300
+++ dwm-6.6-patched/flyschemes.h	2025-12-26 10:55:27.523298225 +0300
@@ -0,0 +1,61 @@
+
+static const char *flyscheme_default_green[][3] = {
+    [SchemeNorm] = { "#bbbbbb", "#222222", "#444444" },
+    [SchemeSel]  = { "#eeeeee", "#117755", "#117755" },
+};
+
+static const char *flyscheme_default_yellow[][3] = {
+    [SchemeNorm] = { "#bbbbbb", "#222222", "#444444" },
+    [SchemeSel]  = { "#eeeeee", "#aa7711", "#aa7711" },
+};
+
+static const char *flyscheme_default_red[][3] = {
+    [SchemeNorm] = { "#bbbbbb", "#222222", "#444444" },
+    [SchemeSel]  = { "#eeeeee", "#771111", "#771111" },
+};
+
+static const char *flyscheme_default_magenta[][3] = {
+    [SchemeNorm] = { "#bbbbbb", "#222222", "#444444" },
+    [SchemeSel]  = { "#eeeeee", "#551177", "#551177" },
+};
+
+static const char *flyscheme_default_pink[][3] = {
+    [SchemeNorm] = { "#bbbbbb", "#222222", "#444444" },
+    [SchemeSel]  = { "#eeeeee", "#aa1177", "#aa1177" },
+};
+
+static const char *flyscheme_dracula[][3] = {
+	[SchemeNorm] = { "#f8f8f2", "#282a36", "#44475a" },
+	[SchemeSel]  = { "#282a36", "#bd93f9", "#bd93f9" },
+};
+
+static const char *flyscheme_gruvbox[][3] = {
+	[SchemeNorm] = { "#ebdbb2", "#282828", "#3c3836" },
+	[SchemeSel]  = { "#282828", "#fabd2f", "#fabd2f" },
+};
+
+static const char *flyscheme_light[][3] = {
+	[SchemeNorm] = { "#222222", "#eeeeee", "#cccccc" },
+	[SchemeSel]  = { "#ffffff", "#4a90e2", "#4a90e2" },
+};
+
+static const char *flyscheme_cyberpunk[][3] = {
+	[SchemeNorm] = { "#00ffcc", "#0d0221", "#1d1231" },
+	[SchemeSel]  = { "#0d0221", "#ff00aa", "#ff00aa" },
+};
+
+// static const char *flyscheme_plan9[][3] = {
+// 	[SchemeNorm] = { "#000000", "#ffffea", "#999999" },
+// 	[SchemeSel]  = { "#000000", "#9ecfff", "#9ecfff" },
+// };
+// 
+// static const char *flyscheme_solarized[][3] = {
+// 	[SchemeNorm] = { "#839496", "#002b36", "#073642" },
+// 	[SchemeSel]  = { "#002b36", "#2aa198", "#2aa198" },
+// };
+// 
+// static const char *flyscheme_nord[][3] = {
+// 	[SchemeNorm] = { "#d8dee9", "#2e3440", "#4c566a" },
+// 	[SchemeSel]  = { "#2e3440", "#88c0d0", "#88c0d0" },
+// };
+
